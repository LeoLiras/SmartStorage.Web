@inject NavigationManager nav

<MudDialog Style="@($"background-color: {backgroundColor}; color: white;")">
    <DialogContent>
        <MudText>@((MarkupString)ContentText.Replace("\n", "<br>"))</MudText>
    </DialogContent>
    <DialogActions>
        @if (ShowCancel)
        {
            <MudButton Color="Color.Secondary" OnClick="Cancel">Cancel</MudButton>
        }

        @if (ShowYes)
        {
            <MudButton Color="@buttonColor" Variant="Variant.Filled" OnClick="Submit">Yes</MudButton>
        }
        else
        {
            <MudButton Color="@buttonColor" Variant="Variant.Filled" OnClick="Submit">Ok</MudButton>
        }
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; }

    [Parameter]
    public string ContentText { get; set; }

    [Parameter]
    public string Navigate { get; set; }

    [Parameter]
    public bool ShowCancel { get; set; }

    [Parameter]
    public bool ShowYes { get; set; }

    [Parameter]
    public EDialogStates State { get; set; }

    [Parameter]
    public EDialogStates dialogState { get; set; } = EDialogStates.Success;


    private string? backgroundColor { get; set; }
    public Color buttonColor { get; set; }

    protected override async Task OnInitializedAsync()
    {
        //Default is success
        switch (State)
        {
            case EDialogStates.Success:
                backgroundColor = "#34eb4f";
                buttonColor = Color.Success;
                break;
            case EDialogStates.Error:
                backgroundColor = "#eb1532";
                buttonColor = Color.Error;
                break;
            case EDialogStates.Warning:
                backgroundColor = "#ffcc00";
                buttonColor = Color.Warning;
                break;
            case EDialogStates.Info:
                backgroundColor = "#2293f0";
                buttonColor = Color.Info;
                break;
            default:
                backgroundColor = "#34eb4f";
                buttonColor = Color.Success;
                break;
        }
    }

    private void Submit()
    {
        MudDialog.Close(DialogResult.Ok(true));

        if(!string.IsNullOrWhiteSpace(Navigate))
            nav.NavigateTo(Navigate);
    }
    
    private void Cancel() => MudDialog.Cancel();
}