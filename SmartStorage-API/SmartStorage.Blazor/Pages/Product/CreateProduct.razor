@page "/product/insert"
@attribute [Authorize]

@inject ApiExtensions api
@inject ShowDialog ShowDialog
@inject VariablesExtensions app

<ProductForm ProductId="0" OnSave="InsertProduct"></ProductForm>

@code {

    #region Methods

    private async Task InsertProduct(ProductVO product)
    {
        try
        {
            var result = await api.Post<ProductVO>(product);

            await ShowDialog.ShowDialogAsync("Produto criado com sucesso.", "Sucesso", app.productsInStockPage, EDialogStates.Success);

            StateHasChanged();
        }
        catch (ApiException ex)
        {
            await ShowDialog.ShowDialogAsync($"Erro inserindo o produto.\n{ex.Message}", "Erro", state: EDialogStates.Warning);
        }
    }

    #endregion

}
