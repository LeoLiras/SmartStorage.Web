@page "/product/edit/{productId:int}"

@inject ApiExtensions api
@inject ShowDialog ShowDialog

<ProductForm ProductId="productId" OnSave="UpdateProduct"></ProductForm>

@code {

    #region Properties

    [Parameter]
    public int productId { get; set; }

    #endregion
    
    #region Methods

    private async Task UpdateProduct(ProductVO product)
    {
        try
        {
            var result = await api.Put<ProductVO>(product, productId);

            await ShowDialog.ShowDialogAsync("Produto atualizado com sucesso", "Sucesso", "product", EDialogStates.Success);

            StateHasChanged();
        }
        catch (ApiException ex)
        {
            await ShowDialog.ShowDialogAsync($"Erro atualizando o produto.\n{ex.Message}", "Erro", state: EDialogStates.Warning);
        }
    }

    #endregion

}

  
